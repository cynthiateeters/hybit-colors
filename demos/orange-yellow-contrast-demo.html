<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Orange & Yellow Contrast Fixer</title>
<style>
  :root{
    --bg: #ffffff;
    --card: #f6f7f8;
    --text: #0a0a0a;
    --border: #d8dde3;
    --accent: #1976d2;
  }
  body{
    font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    margin:0; padding:2rem; color:var(--text); background:var(--bg);
  }
  h1{ font-size:clamp(1.25rem, 1.5vw + 1rem, 1.75rem); margin:.2rem 0 1rem; }
  .wrap{ max-width:1000px; margin:auto; display:grid; gap:1rem; }
  .controls{
    display:flex; flex-wrap:wrap; gap:.75rem; align-items:center; background:var(--card);
    padding:.75rem 1rem; border:1px solid var(--border); border-radius:.5rem;
  }
  .controls label{ font-size:.95rem; }
  .toggle{
    display:inline-flex; gap:.5rem; align-items:center; background:white; padding:.35rem .5rem;
    border:1px solid var(--border); border-radius:.35rem;
  }
  .grid{ display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:1rem; }
  @media (max-width:800px){ .grid{ grid-template-columns:1fr; } }

  .card{
    background:var(--card); border:1px solid var(--border); border-radius:.6rem; padding:1rem;
  }
  .swatch{
    border:1px dashed var(--border); border-radius:.5rem; padding:1rem; margin:.5rem 0 0;
  }
  .sample{ font-size:1.1rem; margin:.25rem 0 .5rem; }
  .big{ font-size:1.5rem; font-weight:700; }
  .row{ display:flex; gap:1rem; flex-wrap:wrap; align-items:center; }
  .slider{
    display:grid; grid-template-columns:110px 1fr 56px; gap:.5rem; align-items:center;
    margin:.35rem 0;
  }
  input[type="range"]{ width:100%; }
  code.badge{
    padding:.2rem .5rem; border-radius:.35rem; border:1px solid var(--border);
    background:#fff; font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  }
  .pass{ color:#136f2b; border-color:#bfe5c7; background:#ecf9ef; }
  .fail{ color:#8b1a1a; border-color:#f0c9c9; background:#fff0f0; }
  .note{ font-size:.9rem; color:#444; margin-top:.5rem; }
  /* focus */
  :where(button, input, select):focus-visible{ outline:2px solid var(--accent); outline-offset:2px; }
  .sr-only{ position:absolute; left:-9999px; width:1px; height:1px; overflow:hidden; }
</style>
</head>
<body>
<div class="wrap">
  <h1>Make Orange & Yellow Text Pass WCAG AA</h1>

  <div class="controls" role="group" aria-label="Background and text size options">
    <span class="toggle" role="group" aria-label="Background choice">
      <label><input type="radio" name="bg" value="light" checked> Light background</label>
      <label><input type="radio" name="bg" value="dark"> Dark background</label>
    </span>
    <span class="toggle" role="group" aria-label="Text size choice">
      <label><input type="radio" name="size" value="normal" checked> Normal text (AA ≥ 4.5:1)</label>
      <label><input type="radio" name="size" value="large"> Large text (AA ≥ 3:1)</label>
    </span>
    <button id="reset" type="button">Reset to Suggested PASS</button>
  </div>

  <div class="grid">
    <!-- ORANGE -->
    <section class="card" aria-labelledby="h-orange">
      <h2 id="h-orange">Orange text (h≈35°)</h2>
      <div class="slider">
        <label for="o-s">Saturation</label>
        <input id="o-s" type="range" min="0" max="100" value="100">
        <output id="o-sv">100%</output>
      </div>
      <div class="slider">
        <label for="o-l">Lightness</label>
        <input id="o-l" type="range" min="0" max="100" value="35">
        <output id="o-lv">35%</output>
      </div>

      <div class="row">
        <code class="badge" id="o-hsl">hsl(35, 100%, 35%)</code>
        <code class="badge" id="o-hex">#—</code>
        <code class="badge" id="o-contrast">—</code>
        <code class="badge" id="o-pass" aria-live="polite">Checking…</code>
      </div>

      <div class="swatch" id="o-swatch">
        <p class="sample">Small body example — Orange label on this background.</p>
        <p class="sample big">Large text example — Orange heading on this background.</p>
        <p class="note">Tip: For orange on light backgrounds, lower <strong>L</strong> to ~30–38%. On dark backgrounds, a bright orange can pass easily.</p>
      </div>
    </section>

    <!-- YELLOW -->
    <section class="card" aria-labelledby="h-yellow">
      <h2 id="h-yellow">Yellow text (h≈55°)</h2>
      <div class="slider">
        <label for="y-s">Saturation</label>
        <input id="y-s" type="range" min="0" max="100" value="100">
        <output id="y-sv">100%</output>
      </div>
      <div class="slider">
        <label for="y-l">Lightness</label>
        <input id="y-l" type="range" min="0" max="100" value="25">
        <output id="y-lv">25%</output>
      </div>

      <div class="row">
        <code class="badge" id="y-hsl">hsl(55, 100%, 25%)</code>
        <code class="badge" id="y-hex">#—</code>
        <code class="badge" id="y-contrast">—</code>
        <code class="badge" id="y-pass" aria-live="polite">Checking…</code>
      </div>

      <div class="swatch" id="y-swatch">
        <p class="sample">Small body example — Yellow label on this background.</p>
        <p class="sample big">Large text example — Yellow heading on this background.</p>
        <p class="note">Tip: “Goldenrod” yellows pass more easily on light bg (lower <strong>L</strong> to ~22–30%). Bright lemon works great on dark bg.</p>
      </div>
    </section>
  </div>

  <p class="note">WCAG AA targets: normal text ≥ <strong>4.5:1</strong>, large text ≥ <strong>3:1</strong>. Toggle “Light/Dark background” to see how flipping the background often solves orange/yellow contrast problems without changing brand hue.</p>

  <div class="sr-only" id="live" aria-live="polite" aria-atomic="true"></div>
</div>

<script>
  // ---- Color helpers ----
  function hslToRgb(h, s, l){ // h[0..360), s,l[0..1]
    s/=100; l/=100; h/=360;
    const a = s * Math.min(l, 1 - l);
    function f(n){
      const k = (n + h*12) % 12;
      const c = l - a * Math.max(-1, Math.min(k-3, Math.min(9-k, 1)));
      return Math.round(c * 255);
    }
    return [f(0), f(8), f(4)];
  }
  function srgbToLuminance([r,g,b]){
    const toLin = v=>{
      v/=255;
      return v<=0.03928 ? v/12.92 : Math.pow((v+0.055)/1.055, 2.4);
    };
    const [R,G,B] = [toLin(r), toLin(g), toLin(b)];
    return 0.2126*R + 0.7152*G + 0.0722*B;
  }
  function contrastRatio(rgb1, rgb2){
    const L1 = srgbToLuminance(rgb1);
    const L2 = srgbToLuminance(rgb2);
    const [a,b] = L1>=L2 ? [L1, L2] : [L2, L1];
    return (a + 0.05) / (b + 0.05);
  }
  function rgbToHex([r,g,b]){
    return '#' + [r,g,b].map(v=>v.toString(16).padStart(2,'0')).join('').toUpperCase();
  }

  // ---- State ----
  const els = {
    // Orange
    os: document.getElementById('o-s'),
    ol: document.getElementById('o-l'),
    osv: document.getElementById('o-sv'),
    olv: document.getElementById('o-lv'),
    ohsl: document.getElementById('o-hsl'),
    ohex: document.getElementById('o-hex'),
    ocon: document.getElementById('o-contrast'),
    opass: document.getElementById('o-pass'),
    oswatch: document.getElementById('o-swatch'),
    // Yellow
    ys: document.getElementById('y-s'),
    yl: document.getElementById('y-l'),
    ysv: document.getElementById('y-sv'),
    ylv: document.getElementById('y-lv'),
    yhsl: document.getElementById('y-hsl'),
    yhex: document.getElementById('y-hex'),
    ycon: document.getElementById('y-contrast'),
    ypass: document.getElementById('y-pass'),
    yswatch: document.getElementById('y-swatch'),
    // Globals
    radiosBg: document.querySelectorAll('input[name="bg"]'),
    radiosSize: document.querySelectorAll('input[name="size"]'),
    reset: document.getElementById('reset'),
    live: document.getElementById('live'),
  };
  let bg = 'light';
  let target = 'normal'; // AA 4.5 or 3.0

  function update(){
    // Background color
    const bgColor = (bg==='light') ? [255,255,255] : [17,17,17];

    // Orange
    const oh=35, os=+els.os.value, ol=+els.ol.value;
    const orgb = hslToRgb(oh, os, ol);
    const oratio = contrastRatio(orgb, bgColor);
    paint('o', orgb, oratio, `hsl(${oh}, ${os}%, ${ol}%)`);

    // Yellow
    const yh=55, ys=+els.ys.value, yl=+els.yl.value;
    const yrgb = hslToRgb(yh, ys, yl);
    const yratio = contrastRatio(yrgb, bgColor);
    paint('y', yrgb, yratio, `hsl(${yh}, ${ys}%, ${yl}%)`);
  }

  function paint(prefix, rgb, ratio, hslStr){
    const hex = rgbToHex(rgb);
    const fg = `rgb(${rgb[0]} ${rgb[1]} ${rgb[2]})`;
    const swatch = (prefix==='o') ? els.oswatch : els.yswatch;
    const con = (prefix==='o') ? els.ocon : els.ycon;
    const pass = (prefix==='o') ? els.opass : els.ypass;
    const hsl = (prefix==='o') ? els.ohsl : els.yhsl;
    const hexEl = (prefix==='o') ? els.ohex : els.yhex;

    // Set text color on samples inside swatch
    swatch.querySelectorAll('.sample').forEach(p => p.style.color = fg);

    // Update badges
    hsl.textContent = hslStr;
    hexEl.textContent = hex;
    con.textContent = `Contrast: ${ratio.toFixed(2)}:1`;

    // Determine AA pass
    const need = (target==='normal') ? 4.5 : 3.0;
    const ok = ratio >= need;
    pass.textContent = ok ? `AA ${target} — PASS` : `AA ${target} — FAIL`;
    pass.className = `badge ${ok ? 'pass' : 'fail'}`;

    // Live announce when state flips
    els.live.textContent = `${prefix==='o'?'Orange':'Yellow'} ${ok?'passes':'fails'} at ${ratio.toFixed(2)} to 1`;
  }

  // Events
  [els.os, els.ol, els.ys, els.yl].forEach(inp=>{
    inp.addEventListener('input', e=>{
      // mirror values into outputs
      if(e.target===els.os) els.osv.textContent = `${els.os.value}%`;
      if(e.target===els.ol) els.olv.textContent = `${els.ol.value}%`;
      if(e.target===els.ys) els.ysv.textContent = `${els.ys.value}%`;
      if(e.target===els.yl) els.ylv.textContent = `${els.yl.value}%`;
      update();
    });
  });
  els.radiosBg.forEach(r=>r.addEventListener('change', e=>{
    bg = e.target.value;
    document.documentElement.style.setProperty('--bg', bg==='light' ? '#ffffff' : '#111111');
    document.documentElement.style.setProperty('--card', bg==='light' ? '#f6f7f8' : '#1b1d20');
    document.documentElement.style.setProperty('--text', bg==='light' ? '#0a0a0a' : '#e8e8e8');
    document.documentElement.style.setProperty('--border', bg==='light' ? '#d8dde3' : '#2a2f35');
    update();
  }));
  els.radiosSize.forEach(r=>r.addEventListener('change', e=>{
    target = e.target.value;
    update();
  }));
  els.reset.addEventListener('click', ()=>{
    // Suggested passing starts
    els.os.value = 100; els.ol.value = (bg==='light' ? 35 : 55);
    els.ys.value = 100; els.yl.value = (bg==='light' ? 25 : 60);
    els.osv.textContent = `${els.os.value}%`;
    els.olv.textContent = `${els.ol.value}%`;
    els.ysv.textContent = `${els.ys.value}%`;
    els.ylv.textContent = `${els.yl.value}%`;
    update();
  });

  // Init
  update();
</script>
</body>
</html>