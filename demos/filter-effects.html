<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HAP's Filter Effects Playground - Learn CSS Filters</title>
    <meta name="description" content="Interactive CSS filter effects playground. Adjust brightness, contrast, saturation, blur, and more to see how CSS filters transform images.">

    <!-- HAP Learning Lab Styles -->
    <link rel="stylesheet" href="../css/style.css">

    <!-- Prism.js for syntax highlighting -->
    <link rel="stylesheet" href="../css/prism-hap-theme.css">

    <style>
        /* Filter Playground Specific Styles */
        .filter-playground {
            max-width: 900px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        .demo-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .demo-header h1 {
            color: var(--dark-brown);
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .demo-header p {
            color: #666;
            font-size: 1rem;
            line-height: 1.6;
        }

        /* Preview Section */
        .preview-section {
            background: var(--cream-white);
            border: 2px solid var(--warm-orange);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        .preview-section h2 {
            color: var(--dark-brown);
            font-size: 1.25rem;
            margin-bottom: 1rem;
        }

        #filter-target {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            display: block;
            margin: 0 auto;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            transition: filter 0.1s ease;
        }

        /* Controls Grid */
        .controls-section {
            background: var(--cream-white);
            border: 2px solid #E8A557;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .controls-section h2 {
            color: var(--dark-brown);
            font-size: 1.25rem;
            margin-bottom: 1rem;
        }

        .controls-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.25rem;
        }

        @media (min-width: 768px) {
            .controls-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        .filter-control {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .filter-control label {
            font-weight: 600;
            color: var(--dark-brown);
            font-size: 0.9rem;
        }

        .slider-row {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .filter-control input[type="range"] {
            flex: 1;
            height: 8px;
            border-radius: 4px;
            background: linear-gradient(to right, #DDD 0%, var(--warm-orange) 50%, #DDD 100%);
            outline: none;
            -webkit-appearance: none;
        }

        .filter-control input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--warm-orange);
            cursor: pointer;
            border: 3px solid white;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
        }

        .filter-control input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--warm-orange);
            cursor: pointer;
            border: 3px solid white;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
        }

        .filter-control input[type="range"]:focus::-webkit-slider-thumb {
            outline: 2px solid var(--teal-darker);
            outline-offset: 2px;
        }

        .filter-control input[type="range"]:focus::-moz-range-thumb {
            outline: 2px solid var(--teal-darker);
            outline-offset: 2px;
        }

        .filter-control output {
            min-width: 4rem;
            text-align: right;
            font-weight: 600;
            color: var(--dark-brown);
            font-size: 0.9rem;
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-bottom: 2rem;
        }

        .action-buttons button,
        .action-buttons select {
            padding: 0.75rem 1.5rem;
            border: 2px solid var(--warm-orange);
            border-radius: 8px;
            background: white;
            color: var(--dark-brown);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1rem;
        }

        .action-buttons button:hover,
        .action-buttons select:hover {
            background: var(--warm-orange);
            color: white;
        }

        .action-buttons button:active {
            transform: scale(0.98);
        }

        .action-buttons select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%233D2817' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            padding-right: 2.5rem;
        }

        /* Performance Indicator */
        .performance-indicator {
            background: #FFF8F0;
            border: 2px solid #E8A557;
            border-radius: 8px;
            padding: 1rem 1.5rem;
            margin-bottom: 2rem;
        }

        .performance-indicator h3 {
            color: var(--dark-brown);
            font-size: 1rem;
            margin-bottom: 0.5rem;
        }

        .performance-indicator p {
            margin: 0;
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .perf-excellent { color: #2D7A2D; font-weight: 600; }
        .perf-good { color: #5B8A3C; font-weight: 600; }
        .perf-moderate { color: #D97706; font-weight: 600; }
        .perf-expensive { color: #C53030; font-weight: 600; }

        /* Output Section */
        .output-section {
            background: var(--cream-white);
            border: 2px solid #E8A557;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .output-section h2 {
            color: var(--dark-brown);
            font-size: 1.25rem;
            margin-bottom: 1rem;
        }

        .output-section pre {
            background: #2d2d2d;
            border-radius: 8px;
            padding: 1rem;
            overflow-x: auto;
            position: relative;
            margin-bottom: 1rem;
            /* Prism theme variables for dark background */
            --code-text: #f8f8f2;
            --code-tag: #E8A557;
            --code-attr: #5BA69C;
            --code-value: #FFB366;
            --code-comment: #C8B8A8;
            --code-punctuation: #C8B8A8;
        }

        .output-section pre code {
            color: var(--code-text);
        }

        #copy-btn {
            background: var(--warm-orange);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1rem;
        }

        #copy-btn:hover {
            background: #D89847;
            transform: translateY(-1px);
        }

        #copy-btn:active {
            transform: translateY(0);
        }

        #copy-btn.copied {
            background: #2D7A2D;
        }

        /* HAP Tips Section */
        .tips-section {
            margin-top: 2rem;
        }

        /* Screen reader only announcements */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        /* Accessibility - prefers-contrast */
        @media (prefers-contrast: more) {
            .preview-section,
            .controls-section,
            .output-section,
            .performance-indicator {
                border-width: 3px;
            }
        }

        /* Accessibility - prefers-reduced-motion */
        @media (prefers-reduced-motion: reduce) {
            * {
                transition-duration: 0.01ms !important;
            }

            #filter-target {
                transition: none !important;
            }
        }
    </style>
</head>
<body>
    <div class="filter-playground">
        <!-- Demo Header -->
        <header class="demo-header">
            <h1>🎨 HAP's Filter Effects Playground</h1>
            <p>Adjust the sliders below to see how CSS filters transform images. Combine multiple filters to create unique effects!</p>
        </header>

        <!-- Preview Section -->
        <section class="preview-section">
            <h2>Live Preview</h2>
            <img
                id="filter-target"
                src="https://picsum.photos/600/400?random=42"
                alt="Colorful landscape photo used for demonstrating CSS filter effects"
                width="600"
                height="400"
                loading="eager"
                fetchpriority="high"
            >
        </section>

        <!-- Filter Controls -->
        <section class="controls-section">
            <h2>Filter Controls</h2>
            <div class="controls-grid">
                <!-- Brightness -->
                <div class="filter-control">
                    <label for="brightness">Brightness</label>
                    <div class="slider-row">
                        <input type="range" id="brightness" min="0" max="200" value="100" step="5" aria-label="Brightness percentage">
                        <output for="brightness" id="brightness-val">100%</output>
                    </div>
                </div>

                <!-- Contrast -->
                <div class="filter-control">
                    <label for="contrast">Contrast</label>
                    <div class="slider-row">
                        <input type="range" id="contrast" min="0" max="200" value="100" step="5" aria-label="Contrast percentage">
                        <output for="contrast" id="contrast-val">100%</output>
                    </div>
                </div>

                <!-- Saturate -->
                <div class="filter-control">
                    <label for="saturate">Saturation</label>
                    <div class="slider-row">
                        <input type="range" id="saturate" min="0" max="200" value="100" step="5" aria-label="Saturation percentage">
                        <output for="saturate" id="saturate-val">100%</output>
                    </div>
                </div>

                <!-- Grayscale -->
                <div class="filter-control">
                    <label for="grayscale">Grayscale</label>
                    <div class="slider-row">
                        <input type="range" id="grayscale" min="0" max="100" value="0" step="5" aria-label="Grayscale percentage">
                        <output for="grayscale" id="grayscale-val">0%</output>
                    </div>
                </div>

                <!-- Sepia -->
                <div class="filter-control">
                    <label for="sepia">Sepia</label>
                    <div class="slider-row">
                        <input type="range" id="sepia" min="0" max="100" value="0" step="5" aria-label="Sepia percentage">
                        <output for="sepia" id="sepia-val">0%</output>
                    </div>
                </div>

                <!-- Hue Rotate -->
                <div class="filter-control">
                    <label for="hue-rotate">Hue Rotate</label>
                    <div class="slider-row">
                        <input type="range" id="hue-rotate" min="0" max="360" value="0" step="5" aria-label="Hue rotation in degrees">
                        <output for="hue-rotate" id="hue-rotate-val">0°</output>
                    </div>
                </div>

                <!-- Blur -->
                <div class="filter-control">
                    <label for="blur">Blur</label>
                    <div class="slider-row">
                        <input type="range" id="blur" min="0" max="10" value="0" step="0.5" aria-label="Blur in pixels">
                        <output for="blur" id="blur-val">0px</output>
                    </div>
                </div>

                <!-- Invert -->
                <div class="filter-control">
                    <label for="invert">Invert</label>
                    <div class="slider-row">
                        <input type="range" id="invert" min="0" max="100" value="0" step="5" aria-label="Invert percentage">
                        <output for="invert" id="invert-val">0%</output>
                    </div>
                </div>
            </div>
        </section>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <button id="reset-btn" type="button">Reset All Filters</button>
            <select id="preset-select" aria-label="Apply filter preset">
                <option value="">Apply Preset...</option>
                <option value="vintage">Vintage Photo</option>
                <option value="high-contrast">High Contrast</option>
                <option value="cool-tone">Cool Tone</option>
                <option value="warm-tone">Warm Tone</option>
                <option value="dramatic">Dramatic B&amp;W</option>
            </select>
        </div>

        <!-- Performance Indicator -->
        <section class="performance-indicator">
            <h3>⚡ Performance Monitor</h3>
            <p id="perf-status" class="perf-excellent">No filters applied (Excellent performance)</p>
        </section>

        <!-- Generated CSS Output -->
        <section class="output-section">
            <h2>Generated CSS</h2>
            <pre><code id="css-output" class="language-css">/* No filters applied */</code></pre>
            <button id="copy-btn" type="button">Copy CSS</button>
        </section>

        <!-- HAP's Tips -->
        <section class="tips-section">
            <div class="hap-note-callout">
                <h3>🟠 HAP's Filter Tips</h3>
                <p><strong>What I learned from Prof. Teeters about CSS filters:</strong></p>
                <ul>
                    <li><strong>Brightness and contrast</strong> are great for hover effects and photo adjustments</li>
                    <li><strong>Sepia and grayscale</strong> create vintage or artistic looks instantly</li>
                    <li><strong>Hue-rotate</strong> shifts the entire color palette - perfect for theme variations</li>
                    <li><strong>Blur is expensive!</strong> I learned to keep blurred areas small for performance</li>
                    <li><strong>Filters stack</strong> - the order matters! Brightness before saturate gives different results than saturate before brightness</li>
                    <li><strong>Use backdrop-filter</strong> for blurring backgrounds behind elements (like frosted glass)</li>
                </ul>
            </div>
        </section>

        <!-- Navigation back to Station 5 -->
        <nav class="page-navigation" style="margin-top: 3rem;">
            <a href="../stations/station5.html" class="nav-link">← Back to Station 5: Modern CSS Colors</a>
        </nav>
    </div>

    <!-- Screen reader announcement area -->
    <div id="announcement" class="sr-only" aria-live="polite" aria-atomic="true"></div>

    <!-- Prism.js for syntax highlighting -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-css.min.js"></script>

    <script>
        // Filter state management
        const filterState = {
            brightness: 100,
            contrast: 100,
            saturate: 100,
            grayscale: 0,
            sepia: 0,
            hueRotate: 0,
            blur: 0,
            invert: 0
        };

        // Filter presets
        const presets = {
            vintage: {
                brightness: 110,
                contrast: 90,
                saturate: 80,
                grayscale: 0,
                sepia: 60,
                hueRotate: 0,
                blur: 0,
                invert: 0
            },
            'high-contrast': {
                brightness: 110,
                contrast: 150,
                saturate: 120,
                grayscale: 0,
                sepia: 0,
                hueRotate: 0,
                blur: 0,
                invert: 0
            },
            'cool-tone': {
                brightness: 105,
                contrast: 100,
                saturate: 90,
                grayscale: 0,
                sepia: 0,
                hueRotate: 180,
                blur: 0,
                invert: 0
            },
            'warm-tone': {
                brightness: 105,
                contrast: 100,
                saturate: 110,
                grayscale: 0,
                sepia: 0,
                hueRotate: -20,
                blur: 0,
                invert: 0
            },
            'dramatic': {
                brightness: 110,
                contrast: 160,
                saturate: 0,
                grayscale: 100,
                sepia: 0,
                hueRotate: 0,
                blur: 0,
                invert: 0
            }
        };

        // Get DOM elements
        const filterTarget = document.getElementById('filter-target');
        const cssOutput = document.getElementById('css-output');
        const perfStatus = document.getElementById('perf-status');

        // Slider elements
        const brightnessSlider = document.getElementById('brightness');
        const contrastSlider = document.getElementById('contrast');
        const saturateSlider = document.getElementById('saturate');
        const grayscaleSlider = document.getElementById('grayscale');
        const sepiaSlider = document.getElementById('sepia');
        const hueRotateSlider = document.getElementById('hue-rotate');
        const blurSlider = document.getElementById('blur');
        const invertSlider = document.getElementById('invert');

        // Output elements
        const brightnessVal = document.getElementById('brightness-val');
        const contrastVal = document.getElementById('contrast-val');
        const saturateVal = document.getElementById('saturate-val');
        const grayscaleVal = document.getElementById('grayscale-val');
        const sepiaVal = document.getElementById('sepia-val');
        const hueRotateVal = document.getElementById('hue-rotate-val');
        const blurVal = document.getElementById('blur-val');
        const invertVal = document.getElementById('invert-val');

        // Update filters and generate CSS
        function updateFilters() {
            const filterString = buildFilterString();
            filterTarget.style.filter = filterString;
            updateCSSOutput(filterString);
            updatePerformanceIndicator();
        }

        // Build filter string from current state
        function buildFilterString() {
            const filters = [];

            if (filterState.brightness !== 100) {
                filters.push(`brightness(${filterState.brightness / 100})`);
            }
            if (filterState.contrast !== 100) {
                filters.push(`contrast(${filterState.contrast / 100})`);
            }
            if (filterState.saturate !== 100) {
                filters.push(`saturate(${filterState.saturate / 100})`);
            }
            if (filterState.grayscale > 0) {
                filters.push(`grayscale(${filterState.grayscale / 100})`);
            }
            if (filterState.sepia > 0) {
                filters.push(`sepia(${filterState.sepia / 100})`);
            }
            if (filterState.hueRotate !== 0) {
                filters.push(`hue-rotate(${filterState.hueRotate}deg)`);
            }
            if (filterState.blur > 0) {
                filters.push(`blur(${filterState.blur}px)`);
            }
            if (filterState.invert > 0) {
                filters.push(`invert(${filterState.invert / 100})`);
            }

            return filters.length > 0 ? filters.join(' ') : 'none';
        }

        // Update CSS output display
        function updateCSSOutput(filterString) {
            let code;
            if (filterString === 'none') {
                code = '/* No filters applied */';
            } else {
                code = `.image {\n  filter: ${filterString};\n}`;
            }

            cssOutput.textContent = code;
            Prism.highlightElement(cssOutput);
        }

        // Update performance indicator
        function updatePerformanceIndicator() {
            const activeFilters = Object.entries(filterState).filter(([key, val]) => {
                if (key === 'brightness' || key === 'contrast' || key === 'saturate') {
                    return val !== 100;
                }
                return val !== 0;
            }).length;

            const hasBlur = filterState.blur > 0;

            let status;
            let className;

            if (activeFilters === 0) {
                status = 'No filters applied (Excellent performance)';
                className = 'perf-excellent';
            } else if (activeFilters <= 3 && !hasBlur) {
                status = `Current filter count: ${activeFilters} (Good performance)`;
                className = 'perf-good';
            } else if (activeFilters > 3 && !hasBlur) {
                status = `Current filter count: ${activeFilters} (May lag on older devices)`;
                className = 'perf-moderate';
            } else if (hasBlur) {
                status = `Current filter count: ${activeFilters} (⚠️ Blur active - expensive!)`;
                className = 'perf-expensive';
            }

            perfStatus.textContent = status;
            perfStatus.className = className;
        }

        // Screen reader announcement
        function announce(message) {
            const announcement = document.getElementById('announcement');
            if (announcement) {
                announcement.textContent = message;
            }
        }

        // Attach slider event listeners
        brightnessSlider.addEventListener('input', (e) => {
            filterState.brightness = parseFloat(e.target.value);
            brightnessVal.textContent = `${filterState.brightness}%`;
            updateFilters();
        });

        contrastSlider.addEventListener('input', (e) => {
            filterState.contrast = parseFloat(e.target.value);
            contrastVal.textContent = `${filterState.contrast}%`;
            updateFilters();
        });

        saturateSlider.addEventListener('input', (e) => {
            filterState.saturate = parseFloat(e.target.value);
            saturateVal.textContent = `${filterState.saturate}%`;
            updateFilters();
        });

        grayscaleSlider.addEventListener('input', (e) => {
            filterState.grayscale = parseFloat(e.target.value);
            grayscaleVal.textContent = `${filterState.grayscale}%`;
            updateFilters();
        });

        sepiaSlider.addEventListener('input', (e) => {
            filterState.sepia = parseFloat(e.target.value);
            sepiaVal.textContent = `${filterState.sepia}%`;
            updateFilters();
        });

        hueRotateSlider.addEventListener('input', (e) => {
            filterState.hueRotate = parseFloat(e.target.value);
            hueRotateVal.textContent = `${filterState.hueRotate}°`;
            updateFilters();
        });

        blurSlider.addEventListener('input', (e) => {
            filterState.blur = parseFloat(e.target.value);
            blurVal.textContent = `${filterState.blur}px`;
            updateFilters();
        });

        invertSlider.addEventListener('input', (e) => {
            filterState.invert = parseFloat(e.target.value);
            invertVal.textContent = `${filterState.invert}%`;
            updateFilters();
        });

        // Reset button
        document.getElementById('reset-btn').addEventListener('click', () => {
            filterState.brightness = 100;
            filterState.contrast = 100;
            filterState.saturate = 100;
            filterState.grayscale = 0;
            filterState.sepia = 0;
            filterState.hueRotate = 0;
            filterState.blur = 0;
            filterState.invert = 0;

            brightnessSlider.value = 100;
            brightnessVal.textContent = '100%';
            contrastSlider.value = 100;
            contrastVal.textContent = '100%';
            saturateSlider.value = 100;
            saturateVal.textContent = '100%';
            grayscaleSlider.value = 0;
            grayscaleVal.textContent = '0%';
            sepiaSlider.value = 0;
            sepiaVal.textContent = '0%';
            hueRotateSlider.value = 0;
            hueRotateVal.textContent = '0°';
            blurSlider.value = 0;
            blurVal.textContent = '0px';
            invertSlider.value = 0;
            invertVal.textContent = '0%';

            updateFilters();
            announce('All filters reset to default values');
        });

        // Preset dropdown
        document.getElementById('preset-select').addEventListener('change', (e) => {
            const presetName = e.target.value;
            if (!presetName) return;

            const preset = presets[presetName];
            if (!preset) return;

            // Apply preset values
            filterState.brightness = preset.brightness;
            filterState.contrast = preset.contrast;
            filterState.saturate = preset.saturate;
            filterState.grayscale = preset.grayscale;
            filterState.sepia = preset.sepia;
            filterState.hueRotate = preset.hueRotate;
            filterState.blur = preset.blur;
            filterState.invert = preset.invert;

            // Update sliders
            brightnessSlider.value = preset.brightness;
            brightnessVal.textContent = `${preset.brightness}%`;
            contrastSlider.value = preset.contrast;
            contrastVal.textContent = `${preset.contrast}%`;
            saturateSlider.value = preset.saturate;
            saturateVal.textContent = `${preset.saturate}%`;
            grayscaleSlider.value = preset.grayscale;
            grayscaleVal.textContent = `${preset.grayscale}%`;
            sepiaSlider.value = preset.sepia;
            sepiaVal.textContent = `${preset.sepia}%`;
            hueRotateSlider.value = preset.hueRotate;
            hueRotateVal.textContent = `${preset.hueRotate}°`;
            blurSlider.value = preset.blur;
            blurVal.textContent = `${preset.blur}px`;
            invertSlider.value = preset.invert;
            invertVal.textContent = `${preset.invert}%`;

            updateFilters();
            announce(`Applied ${presetName} preset`);

            // Reset dropdown
            e.target.value = '';
        });

        // Copy button
        document.getElementById('copy-btn').addEventListener('click', async () => {
            const code = cssOutput.textContent;
            const btn = document.getElementById('copy-btn');

            try {
                await navigator.clipboard.writeText(code);
                btn.classList.add('copied');
                btn.textContent = 'Copied ✅';
                btn.disabled = true;
                announce('CSS code copied to clipboard');

                setTimeout(() => {
                    btn.classList.remove('copied');
                    btn.textContent = 'Copy CSS';
                    btn.disabled = false;
                }, 3000);
            } catch (err) {
                console.error('Copy failed:', err);
                // Auto-select the code for manual copy
                const range = document.createRange();
                range.selectNodeContents(cssOutput);
                const selection = window.getSelection();
                selection.removeAllRanges();
                selection.addRange(range);

                btn.textContent = 'Press Ctrl+C';
                announce('Copy failed. Code is now selected - press Ctrl+C to copy manually.');

                setTimeout(() => {
                    btn.textContent = 'Copy CSS';
                    selection.removeAllRanges();
                }, 4000);
            }
        });

        // Initialize
        updateFilters();
    </script>
</body>
</html>
<!--
HAP™ Educational Content © 2025 Cynthia Teeters. All rights reserved.
HyBit A. ProtoBot™ (HAP™) character and the apprentice learning methodology are proprietary educational innovations.
Character concept, teaching methodology, and all written content created by Prof. Cynthia Teeters.
Visual elements created with AI assistance.
-->
